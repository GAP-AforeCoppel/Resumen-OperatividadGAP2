<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablero de Control Operativo - Afore Coppel</title>
    
    <!-- 1. Estilos (Tailwind CSS) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. React y ReactDOM (Núcleo) -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- 3. Prop-types (CRÍTICO: Requerido por Recharts UMD para evitar error 'oneOfType') -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.8.1/prop-types.min.js"></script>
    
    <!-- 4. Recharts (Gráficas) -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.10.3/Recharts.min.js"></script>
    
    <!-- 5. Babel (Compilador) -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        // --- Iconos SVG (Reemplazo de Lucide para versión Standalone) ---
        const Icon = ({ path, color, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={`${color} ${className}`}>
                {path}
            </svg>
        );

        const TrendingUp = (props) => <Icon {...props} path={<><polyline points="23 6 13.5 15.5 8.5 10.5 1 18" /><polyline points="17 6 23 6 23 12" /></>} />;
        const AlertTriangle = (props) => <Icon {...props} path={<><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" /><line x1="12" y1="9" x2="12" y2="13" /><line x1="12" y1="17" x2="12.01" y2="17" /></>} />;
        const Users = (props) => <Icon {...props} path={<><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><path d="M22 21v-2a4 4 0 0 0-3-3.87" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /></>} />;
        const Clock = (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10" /><polyline points="12 6 12 12 16 14" /></>} />;
        const CheckCircle = (props) => <Icon {...props} path={<><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" /><polyline points="22 4 12 14.01 9 11.01" /></>} />;
        const Target = (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10" /><circle cx="12" cy="12" r="6" /><circle cx="12" cy="12" r="2" /></>} />;
        const BrainCircuit = (props) => <Icon {...props} path={<><path d="M12 4.5a2.5 2.5 0 0 0-4.96-.46 2.5 2.5 0 0 0-1.98 3 2.5 2.5 0 0 0-1.32 3 2.5 2.5 0 0 0 .38 3.7 2.5 2.5 0 0 0 .38 3.7" /><path d="M12 2v2" /><path d="M12 20v2" /><path d="m5 7 1.4-1.4" /><path d="m17.6 18.4 1.4-1.4" /><path d="m19 7-1.4-1.4" /><path d="m6.4 18.4-1.4-1.4" /></>} />;

        // --- Datos y Componentes ---
        // Verificación de seguridad
        const Recharts = window.Recharts;
        if (!Recharts) {
            console.error("Recharts no cargó correctamente.");
            document.getElementById('root').innerHTML = '<div class="p-4 text-red-600">Error cargando gráficas. Verifique conexión.</div>';
            throw new Error("Recharts missing");
        }

        const { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } = Recharts;

        const WorkloadData = [
            { name: 'Jesús Cañedo', antes: 45, despues: 29, status: 'Optimizado' },
            { name: 'Vianney C.', antes: 40, despues: 22, status: 'Optimizado' },
            { name: 'Domenika G.', antes: 2, despues: 34, status: 'Saturado' },
            { name: 'Dania Chavez', antes: 17, despues: 20, status: 'Estable' },
            { name: 'Gloria Sanchez', antes: 6, despues: 10, status: 'Subutilizado' },
        ];

        const KPIData = [
            { title: 'Volumen Total', value: '151', delta: '+9.4%', icon: TrendingUp, color: 'text-red-600', sub: 'vs 138 ayer' },
            { title: 'Riesgo Burnout', value: 'Alto', delta: 'Domenika', icon: AlertTriangle, color: 'text-orange-500', sub: 'Carga súbita' },
            { title: 'Eficiencia de Cierre', value: 'Baja', delta: '< Inflow', icon: Clock, color: 'text-yellow-600', sub: 'Entran más de los que salen' },
            { title: 'Distribución', value: 'Mejorada', delta: 'Parcial', icon: Users, color: 'text-blue-600', sub: 'Se movió carga de Jesús/Vianney' },
        ];

        const ExecutiveReport = () => {
            return (
                <div className="p-6 bg-gray-50 min-h-screen font-sans text-gray-800">
                
                {/* Header Corporativo */}
                <div className="flex justify-between items-center mb-8 border-b-4 border-yellow-400 pb-4">
                    <div>
                    <h1 className="text-3xl font-bold text-blue-900">AFORE COPPEL | Tablero de Control Operativo</h1>
                    <p className="text-sm text-gray-500 mt-1">Análisis de Variación 24 Horas (24 Nov - 25 Nov) | Unidad de Atención</p>
                    </div>
                    <div className="text-right">
                    <div className="bg-blue-900 text-white px-4 py-1 rounded-full text-xs font-bold tracking-wider uppercase inline-block">Confidencial</div>
                    <p className="text-xs text-gray-500 mt-1">Reporte generado por: Gerencia de Atención al Público</p>
                    </div>
                </div>

                {/* KPI Grid */}
                <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                    {KPIData.map((kpi, index) => {
                    const IconComp = kpi.icon;
                    return (
                        <div key={index} className="bg-white p-4 rounded-lg shadow-sm border-l-4 border-blue-900 hover:shadow-md transition-shadow">
                        <div className="flex justify-between items-start">
                            <div>
                            <p className="text-xs font-bold text-gray-400 uppercase tracking-wide">{kpi.title}</p>
                            <h3 className="text-2xl font-bold text-gray-800 mt-1">{kpi.value}</h3>
                            </div>
                            <IconComp className={`h-6 w-6 ${kpi.color}`} />
                        </div>
                        <div className="mt-4 flex items-center text-sm">
                            <span className={`font-bold ${kpi.color} mr-2`}>{kpi.delta}</span>
                            <span className="text-gray-400 text-xs">{kpi.sub}</span>
                        </div>
                        </div>
                    );
                    })}
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    
                    {/* Main Chart Section */}
                    <div className="lg:col-span-2 bg-white p-6 rounded-lg shadow-sm">
                    <h3 className="text-lg font-bold text-blue-900 mb-4 flex items-center">
                        <Users className="h-5 w-5 mr-2" />
                        Redistribución de Carga de Trabajo (Antes vs Después)
                    </h3>
                    <div className="h-80 w-full">
                        <ResponsiveContainer width="100%" height="100%">
                        <BarChart data={WorkloadData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>
                            <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#e5e7eb" />
                            <XAxis dataKey="name" tick={{fontSize: 12}} />
                            <YAxis />
                            <Tooltip cursor={{fill: '#f3f4f6'}} contentStyle={{borderRadius: '8px', border: 'none', boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)'}} />
                            <Legend wrapperStyle={{paddingTop: '20px'}} />
                            <Bar dataKey="antes" name="Carga Inicial (24/11)" fill="#94a3b8" radius={[4, 4, 0, 0]} />
                            <Bar dataKey="despues" name="Carga Actual (25/11)" fill="#1e3a8a" radius={[4, 4, 0, 0]} />
                        </BarChart>
                        </ResponsiveContainer>
                    </div>
                    <div className="mt-4 bg-yellow-50 p-4 rounded border border-yellow-200 text-sm text-yellow-800">
                        <strong>Alerta de Gestión:</strong> Se observa una transferencia de casos de Jesús y Vianney hacia <strong>Domenika</strong>. Si bien libera a los primeros, hemos saturado a un solo recurso en lugar de equilibrar con el resto del equipo (ej. Gloria).
                    </div>
                    </div>

                    {/* Strategic Analysis Side */}
                    <div className="space-y-6">
                    
                    {/* Behavioral Science Insight */}
                    <div className="bg-white p-6 rounded-lg shadow-sm border-t-4 border-indigo-500">
                        <h3 className="text-md font-bold text-indigo-900 mb-3 flex items-center">
                        <BrainCircuit className="h-5 w-5 mr-2 text-indigo-500" />
                        Análisis Conductual
                        </h3>
                        <p className="text-sm text-gray-600 mb-3">
                        Detecto el sesgo de <strong>"Efecto Espectador"</strong> en el equipo.
                        </p>
                        <p className="text-sm text-gray-600">
                        Al ver una lista de 150+ casos, los agentes sienten que la responsabilidad está diluida. El aumento de backlog sugiere que están priorizando casos "fáciles" o nuevos, ignorando los complejos (procrastinación estructurada).
                        </p>
                    </div>

                    {/* Action Plan for Manager */}
                    <div className="bg-blue-900 p-6 rounded-lg shadow-lg text-white">
                        <h3 className="text-md font-bold mb-4 flex items-center text-yellow-400">
                        <Target className="h-5 w-5 mr-2" />
                        Directriz para el Jefe de Área
                        </h3>
                        <ul className="space-y-4 text-sm">
                        <li className="flex items-start">
                            <CheckCircle className="h-5 w-5 mr-2 text-yellow-400 shrink-0" />
                            <span>
                            <strong>Nivelación Inmediata:</strong> Detener asignación a Domenika. Asignar próximos 10 casos a Gloria y Dania.
                            </span>
                        </li>
                        <li className="flex items-start">
                            <CheckCircle className="h-5 w-5 mr-2 text-yellow-400 shrink-0" />
                            <span>
                            <strong>Regla "First-In, First-Out":</strong> Los casos del 24/11 deben cerrarse antes de las 2:00 PM o se escalan.
                            </span>
                        </li>
                        <li className="flex items-start">
                            <CheckCircle className="h-5 w-5 mr-2 text-yellow-400 shrink-0" />
                            <span>
                            <strong>Micro-Meta Diaria:</strong> "Nadie se va hoy con más de 15 casos abiertos". Retar al orgullo profesional.
                            </span>
                        </li>
                        </ul>
                    </div>

                    </div>
                </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ExecutiveReport />);
    </script>
</body>
</html>